{"changed":false,"filter":false,"title":"WhatsappController.php","tooltip":"/modulos/whatsapp/app/Http/Controllers/WhatsappController.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":654,"column":43},"end":{"row":654,"column":56},"action":"remove","lines":["$templateBody"],"id":1698}],[{"start":{"row":654,"column":43},"end":{"row":654,"column":45},"action":"insert","lines":["\"\""],"id":1699}],[{"start":{"row":654,"column":44},"end":{"row":654,"column":45},"action":"insert","lines":["t"],"id":1700},{"start":{"row":654,"column":45},"end":{"row":654,"column":46},"action":"insert","lines":["r"]},{"start":{"row":654,"column":46},"end":{"row":654,"column":47},"action":"insert","lines":["u"]},{"start":{"row":654,"column":47},"end":{"row":654,"column":48},"action":"insert","lines":["e"]}],[{"start":{"row":650,"column":16},"end":{"row":650,"column":17},"action":"insert","lines":["/"],"id":1701},{"start":{"row":650,"column":17},"end":{"row":650,"column":18},"action":"insert","lines":["/"]}],[{"start":{"row":627,"column":7},"end":{"row":627,"column":15},"action":"insert","lines":["$id_user"],"id":1702}],[{"start":{"row":627,"column":15},"end":{"row":627,"column":16},"action":"insert","lines":["="],"id":1703}],[{"start":{"row":627,"column":16},"end":{"row":627,"column":18},"action":"insert","lines":["\"\""],"id":1704}],[{"start":{"row":627,"column":17},"end":{"row":627,"column":18},"action":"insert","lines":["0"],"id":1705}],[{"start":{"row":627,"column":17},"end":{"row":627,"column":18},"action":"remove","lines":["0"],"id":1706}],[{"start":{"row":627,"column":17},"end":{"row":627,"column":18},"action":"insert","lines":["1"],"id":1707}],[{"start":{"row":627,"column":19},"end":{"row":627,"column":20},"action":"insert","lines":[";"],"id":1708}],[{"start":{"row":642,"column":16},"end":{"row":643,"column":0},"action":"insert","lines":["",""],"id":1709},{"start":{"row":643,"column":0},"end":{"row":643,"column":16},"action":"insert","lines":["                "]},{"start":{"row":643,"column":16},"end":{"row":643,"column":17},"action":"insert","lines":["i"]},{"start":{"row":643,"column":17},"end":{"row":643,"column":18},"action":"insert","lines":["f"]}],[{"start":{"row":643,"column":18},"end":{"row":643,"column":20},"action":"insert","lines":["()"],"id":1710}],[{"start":{"row":642,"column":16},"end":{"row":643,"column":0},"action":"insert","lines":["",""],"id":1711},{"start":{"row":643,"column":0},"end":{"row":643,"column":16},"action":"insert","lines":["                "]},{"start":{"row":643,"column":16},"end":{"row":643,"column":17},"action":"insert","lines":["$"]}],[{"start":{"row":643,"column":17},"end":{"row":643,"column":18},"action":"insert","lines":["w"],"id":1712}],[{"start":{"row":643,"column":18},"end":{"row":643,"column":19},"action":"insert","lines":[" "],"id":1713},{"start":{"row":643,"column":19},"end":{"row":643,"column":20},"action":"insert","lines":["="]}],[{"start":{"row":643,"column":20},"end":{"row":643,"column":21},"action":"insert","lines":[" "],"id":1714}],[{"start":{"row":643,"column":21},"end":{"row":643,"column":39},"action":"insert","lines":["WhatsappTemplate()"],"id":1715}],[{"start":{"row":643,"column":38},"end":{"row":643,"column":39},"action":"remove","lines":[")"],"id":1716},{"start":{"row":643,"column":37},"end":{"row":643,"column":38},"action":"remove","lines":["("]}],[{"start":{"row":643,"column":37},"end":{"row":643,"column":38},"action":"insert","lines":[":"],"id":1717},{"start":{"row":643,"column":38},"end":{"row":643,"column":39},"action":"insert","lines":[":"]},{"start":{"row":643,"column":39},"end":{"row":643,"column":40},"action":"insert","lines":["w"]},{"start":{"row":643,"column":40},"end":{"row":643,"column":41},"action":"insert","lines":["h"]},{"start":{"row":643,"column":41},"end":{"row":643,"column":42},"action":"insert","lines":["e"]},{"start":{"row":643,"column":42},"end":{"row":643,"column":43},"action":"insert","lines":["r"]},{"start":{"row":643,"column":43},"end":{"row":643,"column":44},"action":"insert","lines":["e"]}],[{"start":{"row":643,"column":44},"end":{"row":643,"column":46},"action":"insert","lines":["()"],"id":1718}],[{"start":{"row":643,"column":45},"end":{"row":643,"column":47},"action":"insert","lines":["''"],"id":1719}],[{"start":{"row":643,"column":48},"end":{"row":643,"column":49},"action":"insert","lines":["-"],"id":1720},{"start":{"row":643,"column":49},"end":{"row":643,"column":50},"action":"insert","lines":[">"]},{"start":{"row":643,"column":50},"end":{"row":643,"column":51},"action":"insert","lines":["f"]},{"start":{"row":643,"column":51},"end":{"row":643,"column":52},"action":"insert","lines":["i"]}],[{"start":{"row":643,"column":52},"end":{"row":643,"column":53},"action":"insert","lines":["s"],"id":1721}],[{"start":{"row":643,"column":52},"end":{"row":643,"column":53},"action":"remove","lines":["s"],"id":1722}],[{"start":{"row":643,"column":52},"end":{"row":643,"column":53},"action":"insert","lines":["r"],"id":1723},{"start":{"row":643,"column":53},"end":{"row":643,"column":54},"action":"insert","lines":["s"]}],[{"start":{"row":643,"column":50},"end":{"row":643,"column":54},"action":"remove","lines":["firs"],"id":1724},{"start":{"row":643,"column":50},"end":{"row":643,"column":55},"action":"insert","lines":["first"]}],[{"start":{"row":643,"column":55},"end":{"row":643,"column":57},"action":"insert","lines":["()"],"id":1725}],[{"start":{"row":643,"column":57},"end":{"row":643,"column":58},"action":"insert","lines":[";"],"id":1726}],[{"start":{"row":643,"column":46},"end":{"row":643,"column":57},"action":"insert","lines":["id_template"],"id":1727}],[{"start":{"row":643,"column":58},"end":{"row":643,"column":59},"action":"insert","lines":[","],"id":1728}],[{"start":{"row":643,"column":59},"end":{"row":643,"column":70},"action":"insert","lines":["$idTemplate"],"id":1729}],[{"start":{"row":644,"column":19},"end":{"row":644,"column":21},"action":"insert","lines":["$w"],"id":1730}],[{"start":{"row":644,"column":22},"end":{"row":644,"column":23},"action":"insert","lines":["{"],"id":1731},{"start":{"row":644,"column":23},"end":{"row":644,"column":24},"action":"insert","lines":["}"]}],[{"start":{"row":644,"column":23},"end":{"row":646,"column":16},"action":"insert","lines":["","                    ","                "],"id":1732}],[{"start":{"row":646,"column":17},"end":{"row":646,"column":18},"action":"insert","lines":["e"],"id":1733},{"start":{"row":646,"column":18},"end":{"row":646,"column":19},"action":"insert","lines":["l"]},{"start":{"row":646,"column":19},"end":{"row":646,"column":20},"action":"insert","lines":["s"]},{"start":{"row":646,"column":20},"end":{"row":646,"column":21},"action":"insert","lines":["e"]},{"start":{"row":646,"column":21},"end":{"row":646,"column":22},"action":"insert","lines":["{"]},{"start":{"row":646,"column":22},"end":{"row":646,"column":23},"action":"insert","lines":["}"]}],[{"start":{"row":646,"column":22},"end":{"row":648,"column":16},"action":"insert","lines":["","                    ","                "],"id":1734}],[{"start":{"row":649,"column":16},"end":{"row":681,"column":27},"action":"remove","lines":["$x = new WhatsappTemplate();","                $x->id_template = $idTemplate;","                $x->id_config = $request->configid;","                $x->templateName = $item['name'] ;","                $x->language = $item['language'] ;","                $x->category = $item['category'] ; ","                ","                //$x->templateExampleBody = '' ; //exemplo body","                ","                foreach ($item['components'] as $c) {","                    if ($c['type'] == 'BODY'){","                        $x->templateBody = \"true\"; //true o false","                        $x->templateBodyText = $c['text'] ;","                    }","                    if ($c['type'] == 'HEADER'){","                        $x->templateHeader = \"true\"; //true o false","                        $x->templateHeaderType = $c['format'] ;","                        if($c['format']=='TEXT'){","                            $x->templateHeaderText = $c['text'];    ","                        }","                    }","                    if ($c['type'] == 'FOOTER'){","                        $x->templateFooter = \"true\"; //true o false","                        $x->templateFooterText = $c['text'];","                    }","                }","                //$x->templateBodyVariable = $templateBodyVariable;//TRUE O FALSE SI CONTIENE VARIABLES","                //$x->templateExampleHeader = $templateExampleHeader;","                //$x->templateHeaderVariable = $templateHeaderVariable;","                //$x->templateHeaderTypeHandle = $templateHeaderTypeHandle;","                //$x->templateHeaderTypeUrl = $templateHeaderTypeUrl;","                $x->id_user = $id_user;","                $x->save();"],"id":1735}],[{"start":{"row":647,"column":20},"end":{"row":679,"column":27},"action":"insert","lines":["$x = new WhatsappTemplate();","                $x->id_template = $idTemplate;","                $x->id_config = $request->configid;","                $x->templateName = $item['name'] ;","                $x->language = $item['language'] ;","                $x->category = $item['category'] ; ","                ","                //$x->templateExampleBody = '' ; //exemplo body","                ","                foreach ($item['components'] as $c) {","                    if ($c['type'] == 'BODY'){","                        $x->templateBody = \"true\"; //true o false","                        $x->templateBodyText = $c['text'] ;","                    }","                    if ($c['type'] == 'HEADER'){","                        $x->templateHeader = \"true\"; //true o false","                        $x->templateHeaderType = $c['format'] ;","                        if($c['format']=='TEXT'){","                            $x->templateHeaderText = $c['text'];    ","                        }","                    }","                    if ($c['type'] == 'FOOTER'){","                        $x->templateFooter = \"true\"; //true o false","                        $x->templateFooterText = $c['text'];","                    }","                }","                //$x->templateBodyVariable = $templateBodyVariable;//TRUE O FALSE SI CONTIENE VARIABLES","                //$x->templateExampleHeader = $templateExampleHeader;","                //$x->templateHeaderVariable = $templateHeaderVariable;","                //$x->templateHeaderTypeHandle = $templateHeaderTypeHandle;","                //$x->templateHeaderTypeUrl = $templateHeaderTypeUrl;","                $x->id_user = $id_user;","                $x->save();"],"id":1736}],[{"start":{"row":648,"column":0},"end":{"row":648,"column":4},"action":"insert","lines":["    "],"id":1737},{"start":{"row":649,"column":0},"end":{"row":649,"column":4},"action":"insert","lines":["    "]},{"start":{"row":650,"column":0},"end":{"row":650,"column":4},"action":"insert","lines":["    "]},{"start":{"row":651,"column":0},"end":{"row":651,"column":4},"action":"insert","lines":["    "]},{"start":{"row":652,"column":0},"end":{"row":652,"column":4},"action":"insert","lines":["    "]},{"start":{"row":653,"column":0},"end":{"row":653,"column":4},"action":"insert","lines":["    "]},{"start":{"row":654,"column":0},"end":{"row":654,"column":4},"action":"insert","lines":["    "]},{"start":{"row":655,"column":0},"end":{"row":655,"column":4},"action":"insert","lines":["    "]},{"start":{"row":656,"column":0},"end":{"row":656,"column":4},"action":"insert","lines":["    "]},{"start":{"row":657,"column":0},"end":{"row":657,"column":4},"action":"insert","lines":["    "]},{"start":{"row":658,"column":0},"end":{"row":658,"column":4},"action":"insert","lines":["    "]},{"start":{"row":659,"column":0},"end":{"row":659,"column":4},"action":"insert","lines":["    "]},{"start":{"row":660,"column":0},"end":{"row":660,"column":4},"action":"insert","lines":["    "]},{"start":{"row":661,"column":0},"end":{"row":661,"column":4},"action":"insert","lines":["    "]},{"start":{"row":662,"column":0},"end":{"row":662,"column":4},"action":"insert","lines":["    "]},{"start":{"row":663,"column":0},"end":{"row":663,"column":4},"action":"insert","lines":["    "]},{"start":{"row":664,"column":0},"end":{"row":664,"column":4},"action":"insert","lines":["    "]},{"start":{"row":665,"column":0},"end":{"row":665,"column":4},"action":"insert","lines":["    "]},{"start":{"row":666,"column":0},"end":{"row":666,"column":4},"action":"insert","lines":["    "]},{"start":{"row":667,"column":0},"end":{"row":667,"column":4},"action":"insert","lines":["    "]},{"start":{"row":668,"column":0},"end":{"row":668,"column":4},"action":"insert","lines":["    "]},{"start":{"row":669,"column":0},"end":{"row":669,"column":4},"action":"insert","lines":["    "]},{"start":{"row":670,"column":0},"end":{"row":670,"column":4},"action":"insert","lines":["    "]},{"start":{"row":671,"column":0},"end":{"row":671,"column":4},"action":"insert","lines":["    "]},{"start":{"row":672,"column":0},"end":{"row":672,"column":4},"action":"insert","lines":["    "]},{"start":{"row":673,"column":0},"end":{"row":673,"column":4},"action":"insert","lines":["    "]},{"start":{"row":674,"column":0},"end":{"row":674,"column":4},"action":"insert","lines":["    "]},{"start":{"row":675,"column":0},"end":{"row":675,"column":4},"action":"insert","lines":["    "]},{"start":{"row":676,"column":0},"end":{"row":676,"column":4},"action":"insert","lines":["    "]},{"start":{"row":677,"column":0},"end":{"row":677,"column":4},"action":"insert","lines":["    "]},{"start":{"row":678,"column":0},"end":{"row":678,"column":4},"action":"insert","lines":["    "]},{"start":{"row":679,"column":0},"end":{"row":679,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":645,"column":20},"end":{"row":677,"column":27},"action":"insert","lines":["$x = new WhatsappTemplate();","                $x->id_template = $idTemplate;","                $x->id_config = $request->configid;","                $x->templateName = $item['name'] ;","                $x->language = $item['language'] ;","                $x->category = $item['category'] ; ","                ","                //$x->templateExampleBody = '' ; //exemplo body","                ","                foreach ($item['components'] as $c) {","                    if ($c['type'] == 'BODY'){","                        $x->templateBody = \"true\"; //true o false","                        $x->templateBodyText = $c['text'] ;","                    }","                    if ($c['type'] == 'HEADER'){","                        $x->templateHeader = \"true\"; //true o false","                        $x->templateHeaderType = $c['format'] ;","                        if($c['format']=='TEXT'){","                            $x->templateHeaderText = $c['text'];    ","                        }","                    }","                    if ($c['type'] == 'FOOTER'){","                        $x->templateFooter = \"true\"; //true o false","                        $x->templateFooterText = $c['text'];","                    }","                }","                //$x->templateBodyVariable = $templateBodyVariable;//TRUE O FALSE SI CONTIENE VARIABLES","                //$x->templateExampleHeader = $templateExampleHeader;","                //$x->templateHeaderVariable = $templateHeaderVariable;","                //$x->templateHeaderTypeHandle = $templateHeaderTypeHandle;","                //$x->templateHeaderTypeUrl = $templateHeaderTypeUrl;","                $x->id_user = $id_user;","                $x->save();"],"id":1738}],[{"start":{"row":646,"column":0},"end":{"row":646,"column":4},"action":"insert","lines":["    "],"id":1739},{"start":{"row":647,"column":0},"end":{"row":647,"column":4},"action":"insert","lines":["    "]},{"start":{"row":648,"column":0},"end":{"row":648,"column":4},"action":"insert","lines":["    "]},{"start":{"row":649,"column":0},"end":{"row":649,"column":4},"action":"insert","lines":["    "]},{"start":{"row":650,"column":0},"end":{"row":650,"column":4},"action":"insert","lines":["    "]},{"start":{"row":651,"column":0},"end":{"row":651,"column":4},"action":"insert","lines":["    "]},{"start":{"row":652,"column":0},"end":{"row":652,"column":4},"action":"insert","lines":["    "]},{"start":{"row":653,"column":0},"end":{"row":653,"column":4},"action":"insert","lines":["    "]},{"start":{"row":654,"column":0},"end":{"row":654,"column":4},"action":"insert","lines":["    "]},{"start":{"row":655,"column":0},"end":{"row":655,"column":4},"action":"insert","lines":["    "]},{"start":{"row":656,"column":0},"end":{"row":656,"column":4},"action":"insert","lines":["    "]},{"start":{"row":657,"column":0},"end":{"row":657,"column":4},"action":"insert","lines":["    "]},{"start":{"row":658,"column":0},"end":{"row":658,"column":4},"action":"insert","lines":["    "]},{"start":{"row":659,"column":0},"end":{"row":659,"column":4},"action":"insert","lines":["    "]},{"start":{"row":660,"column":0},"end":{"row":660,"column":4},"action":"insert","lines":["    "]},{"start":{"row":661,"column":0},"end":{"row":661,"column":4},"action":"insert","lines":["    "]},{"start":{"row":662,"column":0},"end":{"row":662,"column":4},"action":"insert","lines":["    "]},{"start":{"row":663,"column":0},"end":{"row":663,"column":4},"action":"insert","lines":["    "]},{"start":{"row":664,"column":0},"end":{"row":664,"column":4},"action":"insert","lines":["    "]},{"start":{"row":665,"column":0},"end":{"row":665,"column":4},"action":"insert","lines":["    "]},{"start":{"row":666,"column":0},"end":{"row":666,"column":4},"action":"insert","lines":["    "]},{"start":{"row":667,"column":0},"end":{"row":667,"column":4},"action":"insert","lines":["    "]},{"start":{"row":668,"column":0},"end":{"row":668,"column":4},"action":"insert","lines":["    "]},{"start":{"row":669,"column":0},"end":{"row":669,"column":4},"action":"insert","lines":["    "]},{"start":{"row":670,"column":0},"end":{"row":670,"column":4},"action":"insert","lines":["    "]},{"start":{"row":671,"column":0},"end":{"row":671,"column":4},"action":"insert","lines":["    "]},{"start":{"row":672,"column":0},"end":{"row":672,"column":4},"action":"insert","lines":["    "]},{"start":{"row":673,"column":0},"end":{"row":673,"column":4},"action":"insert","lines":["    "]},{"start":{"row":674,"column":0},"end":{"row":674,"column":4},"action":"insert","lines":["    "]},{"start":{"row":675,"column":0},"end":{"row":675,"column":4},"action":"insert","lines":["    "]},{"start":{"row":676,"column":0},"end":{"row":676,"column":4},"action":"insert","lines":["    "]},{"start":{"row":677,"column":0},"end":{"row":677,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":644,"column":19},"end":{"row":644,"column":21},"action":"remove","lines":["$w"],"id":1740},{"start":{"row":644,"column":19},"end":{"row":644,"column":21},"action":"insert","lines":["$x"]}],[{"start":{"row":643,"column":16},"end":{"row":643,"column":18},"action":"remove","lines":["$w"],"id":1741},{"start":{"row":643,"column":16},"end":{"row":643,"column":18},"action":"insert","lines":["$x"]}],[{"start":{"row":645,"column":20},"end":{"row":645,"column":48},"action":"remove","lines":["$x = new WhatsappTemplate();"],"id":1742}],[{"start":{"row":644,"column":23},"end":{"row":645,"column":20},"action":"remove","lines":["","                    "],"id":1743}],[{"start":{"row":645,"column":18},"end":{"row":645,"column":50},"action":"remove","lines":["  $x->id_template = $idTemplate;"],"id":1744}],[{"start":{"row":646,"column":17},"end":{"row":646,"column":55},"action":"remove","lines":["   $x->id_config = $request->configid;"],"id":1745}],[{"start":{"row":644,"column":23},"end":{"row":646,"column":17},"action":"remove","lines":["","                  ","                 "],"id":1746}],[{"start":{"row":643,"column":71},"end":{"row":643,"column":72},"action":"insert","lines":["-"],"id":1747},{"start":{"row":643,"column":72},"end":{"row":643,"column":73},"action":"insert","lines":[">"]}],[{"start":{"row":643,"column":73},"end":{"row":643,"column":105},"action":"insert","lines":["where('id_template',$idTemplate)"],"id":1748}],[{"start":{"row":643,"column":80},"end":{"row":643,"column":91},"action":"remove","lines":["id_template"],"id":1749},{"start":{"row":643,"column":80},"end":{"row":643,"column":89},"action":"insert","lines":["id_config"]}],[{"start":{"row":643,"column":91},"end":{"row":643,"column":102},"action":"remove","lines":["$idTemplate"],"id":1750},{"start":{"row":643,"column":91},"end":{"row":643,"column":109},"action":"insert","lines":["$request->configid"]}],[{"start":{"row":745,"column":7},"end":{"row":745,"column":39},"action":"insert","lines":["listarMessagesTemplateConfigIdBD"],"id":1751}],[{"start":{"row":744,"column":4},"end":{"row":762,"column":5},"action":"insert","lines":[" public function ObtenerTemplatexId(Request $request) // espacio de nombres","    {","       $whatsappConfig = WhatsappConfig::where('id',$request->configid)->first();","       $whatsappBusinessAccountID = $whatsappConfig->whatsappBusinessAccountID;//101573755994797","       $userAccessToken = $whatsappConfig->userAccessToken; //EAAPmKaDlIbEBAPFLZC4tyq6e2hb3p0yjEyzZChcZAeZBHHfjlvwtGpt2pMZC3YUumI1sGFeoAvgZA8JfZBMMgpqcZAnKpF7sRQwSMF9FeqYUjUmnsHfyhcob5hne9HbZBgNN9XYo8VZAvrwmEvJ7tALisZCB6wZB3Q20ZBzZBis3ilhEjjquvHmxR4XHkCYj4zuUGSF5lwA3zxHUcxWZBdEjuDlZBS9R","       $idTemplate = $request->idTemplate;","       $limit = 1000;","       $apiURL = \"\";","       $apiURL = env('GRAPH_FACEBOOK_v14').$whatsappBusinessAccountID.'/message_templates?limit='.$limit.'&access_token='.$userAccessToken;","       $response = Http::get($apiURL);","       $statusCode = $response->status();","       $responseBody = json_decode($response->getBody(), true);","       ","       foreach ($responseBody['data'] as $item) {","            if ($item['id'] == $idTemplate){","                return json_encode($item);","            }","       }","    }"],"id":1752}],[{"start":{"row":744,"column":4},"end":{"row":744,"column":5},"action":"remove","lines":[" "],"id":1753}],[{"start":{"row":744,"column":4},"end":{"row":745,"column":0},"action":"insert","lines":["",""],"id":1754},{"start":{"row":745,"column":0},"end":{"row":745,"column":4},"action":"insert","lines":["    "]},{"start":{"row":745,"column":4},"end":{"row":746,"column":0},"action":"insert","lines":["",""]},{"start":{"row":746,"column":0},"end":{"row":746,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":765,"column":7},"end":{"row":765,"column":39},"action":"remove","lines":["listarMessagesTemplateConfigIdBD"],"id":1755}],[{"start":{"row":746,"column":20},"end":{"row":746,"column":38},"action":"remove","lines":["ObtenerTemplatexId"],"id":1756},{"start":{"row":746,"column":20},"end":{"row":746,"column":52},"action":"insert","lines":["listarMessagesTemplateConfigIdBD"]}],[{"start":{"row":748,"column":25},"end":{"row":748,"column":39},"action":"remove","lines":["WhatsappConfig"],"id":1757},{"start":{"row":748,"column":25},"end":{"row":748,"column":41},"action":"insert","lines":["WhatsappTemplate"]}],[{"start":{"row":748,"column":50},"end":{"row":748,"column":52},"action":"remove","lines":["id"],"id":1758},{"start":{"row":748,"column":50},"end":{"row":748,"column":61},"action":"insert","lines":["id_template"]}],[{"start":{"row":748,"column":50},"end":{"row":748,"column":61},"action":"remove","lines":["id_template"],"id":1760},{"start":{"row":748,"column":50},"end":{"row":748,"column":60},"action":"insert","lines":["idTemplate"]}],[{"start":{"row":748,"column":81},"end":{"row":748,"column":119},"action":"insert","lines":["where('idTemplate',$request->configid)"],"id":1761}],[{"start":{"row":748,"column":81},"end":{"row":748,"column":82},"action":"insert","lines":["-"],"id":1762},{"start":{"row":748,"column":82},"end":{"row":748,"column":83},"action":"insert","lines":[">"]}],[{"start":{"row":748,"column":90},"end":{"row":748,"column":100},"action":"remove","lines":["idTemplate"],"id":1763},{"start":{"row":748,"column":90},"end":{"row":748,"column":98},"action":"insert","lines":["configid"]}],[{"start":{"row":748,"column":90},"end":{"row":748,"column":98},"action":"remove","lines":["configid"],"id":1764},{"start":{"row":748,"column":90},"end":{"row":748,"column":99},"action":"insert","lines":["id_config"]}],[{"start":{"row":748,"column":50},"end":{"row":748,"column":60},"action":"remove","lines":["idTemplate"],"id":1765},{"start":{"row":748,"column":50},"end":{"row":748,"column":61},"action":"insert","lines":["id_template"]}],[{"start":{"row":748,"column":112},"end":{"row":748,"column":120},"action":"remove","lines":["configid"],"id":1766},{"start":{"row":748,"column":112},"end":{"row":748,"column":120},"action":"insert","lines":["configid"]}],[{"start":{"row":748,"column":73},"end":{"row":748,"column":81},"action":"remove","lines":["configid"],"id":1767},{"start":{"row":748,"column":73},"end":{"row":748,"column":91},"action":"insert","lines":["listNamesTemplates"]}],[{"start":{"row":748,"column":73},"end":{"row":748,"column":91},"action":"remove","lines":["listNamesTemplates"],"id":1768},{"start":{"row":748,"column":73},"end":{"row":748,"column":83},"action":"insert","lines":["idTemplate"]}],[{"start":{"row":749,"column":7},"end":{"row":760,"column":44},"action":"remove","lines":["$whatsappBusinessAccountID = $whatsappConfig->whatsappBusinessAccountID;//101573755994797","       $userAccessToken = $whatsappConfig->userAccessToken; //EAAPmKaDlIbEBAPFLZC4tyq6e2hb3p0yjEyzZChcZAeZBHHfjlvwtGpt2pMZC3YUumI1sGFeoAvgZA8JfZBMMgpqcZAnKpF7sRQwSMF9FeqYUjUmnsHfyhcob5hne9HbZBgNN9XYo8VZAvrwmEvJ7tALisZCB6wZB3Q20ZBzZBis3ilhEjjquvHmxR4XHkCYj4zuUGSF5lwA3zxHUcxWZBdEjuDlZBS9R","       $idTemplate = $request->idTemplate;","       $limit = 1000;","       $apiURL = \"\";","       $apiURL = env('GRAPH_FACEBOOK_v14').$whatsappBusinessAccountID.'/message_templates?limit='.$limit.'&access_token='.$userAccessToken;","       $response = Http::get($apiURL);","       $statusCode = $response->status();","       $responseBody = json_decode($response->getBody(), true);","       ","       foreach ($responseBody['data'] as $item) {","            if ($item['id'] == $idTemplate){"],"id":1769}],[{"start":{"row":750,"column":7},"end":{"row":750,"column":16},"action":"remove","lines":["         "],"id":1770}],[{"start":{"row":750,"column":33},"end":{"row":752,"column":8},"action":"remove","lines":["","            }","       }"],"id":1771}],[{"start":{"row":750,"column":14},"end":{"row":750,"column":32},"action":"remove","lines":["json_encode($item)"],"id":1772},{"start":{"row":750,"column":14},"end":{"row":750,"column":29},"action":"insert","lines":["$whatsappConfig"]}],[{"start":{"row":750,"column":29},"end":{"row":750,"column":30},"action":"insert","lines":["-"],"id":1773},{"start":{"row":750,"column":30},"end":{"row":750,"column":31},"action":"insert","lines":[">"]},{"start":{"row":750,"column":31},"end":{"row":750,"column":32},"action":"insert","lines":["T"]}],[{"start":{"row":750,"column":32},"end":{"row":750,"column":33},"action":"insert","lines":["O"],"id":1774}],[{"start":{"row":750,"column":32},"end":{"row":750,"column":33},"action":"remove","lines":["O"],"id":1775}],[{"start":{"row":750,"column":32},"end":{"row":750,"column":33},"action":"insert","lines":["o"],"id":1776},{"start":{"row":750,"column":33},"end":{"row":750,"column":34},"action":"insert","lines":["J"]},{"start":{"row":750,"column":34},"end":{"row":750,"column":35},"action":"insert","lines":["s"]},{"start":{"row":750,"column":35},"end":{"row":750,"column":36},"action":"insert","lines":["o"]}],[{"start":{"row":750,"column":36},"end":{"row":750,"column":37},"action":"insert","lines":["n"],"id":1777}],[{"start":{"row":750,"column":31},"end":{"row":750,"column":32},"action":"remove","lines":["T"],"id":1778}],[{"start":{"row":750,"column":31},"end":{"row":750,"column":32},"action":"insert","lines":["t"],"id":1779}],[{"start":{"row":750,"column":37},"end":{"row":750,"column":39},"action":"insert","lines":["()"],"id":1780}],[{"start":{"row":749,"column":7},"end":{"row":749,"column":8},"action":"insert","lines":["i"],"id":1781},{"start":{"row":749,"column":8},"end":{"row":749,"column":9},"action":"insert","lines":["f"]}],[{"start":{"row":749,"column":9},"end":{"row":749,"column":11},"action":"insert","lines":["()"],"id":1782}],[{"start":{"row":748,"column":8},"end":{"row":748,"column":22},"action":"remove","lines":["whatsappConfig"],"id":1783},{"start":{"row":748,"column":8},"end":{"row":748,"column":24},"action":"insert","lines":["WhatsappTemplate"]}],[{"start":{"row":748,"column":8},"end":{"row":748,"column":9},"action":"remove","lines":["W"],"id":1784}],[{"start":{"row":748,"column":8},"end":{"row":748,"column":9},"action":"insert","lines":["w"],"id":1785}],[{"start":{"row":749,"column":10},"end":{"row":749,"column":27},"action":"insert","lines":["$whatsappTemplate"],"id":1786}],[{"start":{"row":749,"column":28},"end":{"row":749,"column":29},"action":"insert","lines":["{"],"id":1787},{"start":{"row":749,"column":29},"end":{"row":749,"column":30},"action":"insert","lines":["}"]}],[{"start":{"row":749,"column":29},"end":{"row":751,"column":7},"action":"insert","lines":["","           ","       "],"id":1788}],[{"start":{"row":751,"column":8},"end":{"row":751,"column":9},"action":"insert","lines":["e"],"id":1789},{"start":{"row":751,"column":9},"end":{"row":751,"column":10},"action":"insert","lines":["l"]},{"start":{"row":751,"column":10},"end":{"row":751,"column":11},"action":"insert","lines":["s"]},{"start":{"row":751,"column":11},"end":{"row":751,"column":12},"action":"insert","lines":["e"]},{"start":{"row":751,"column":12},"end":{"row":751,"column":13},"action":"insert","lines":["{"]},{"start":{"row":751,"column":13},"end":{"row":751,"column":14},"action":"insert","lines":["}"]}],[{"start":{"row":751,"column":13},"end":{"row":753,"column":7},"action":"insert","lines":["","           ","       "],"id":1790}],[{"start":{"row":754,"column":6},"end":{"row":754,"column":40},"action":"remove","lines":[" return $whatsappConfig->toJson();"],"id":1791}],[{"start":{"row":750,"column":11},"end":{"row":750,"column":45},"action":"insert","lines":[" return $whatsappConfig->toJson();"],"id":1792}],[{"start":{"row":752,"column":11},"end":{"row":752,"column":45},"action":"insert","lines":[" return $whatsappConfig->toJson();"],"id":1793}],[{"start":{"row":752,"column":19},"end":{"row":752,"column":44},"action":"remove","lines":["$whatsappConfig->toJson()"],"id":1794}],[{"start":{"row":752,"column":19},"end":{"row":752,"column":21},"action":"insert","lines":["\"\""],"id":1795}],[{"start":{"row":752,"column":20},"end":{"row":752,"column":21},"action":"insert","lines":["N"],"id":1796},{"start":{"row":752,"column":21},"end":{"row":752,"column":22},"action":"insert","lines":["o"]}],[{"start":{"row":752,"column":22},"end":{"row":752,"column":23},"action":"insert","lines":[" "],"id":1797},{"start":{"row":752,"column":23},"end":{"row":752,"column":24},"action":"insert","lines":["e"]},{"start":{"row":752,"column":24},"end":{"row":752,"column":25},"action":"insert","lines":["x"]},{"start":{"row":752,"column":25},"end":{"row":752,"column":26},"action":"insert","lines":["i"]},{"start":{"row":752,"column":26},"end":{"row":752,"column":27},"action":"insert","lines":["s"]},{"start":{"row":752,"column":27},"end":{"row":752,"column":28},"action":"insert","lines":["t"]},{"start":{"row":752,"column":28},"end":{"row":752,"column":29},"action":"insert","lines":["e"]}],[{"start":{"row":750,"column":19},"end":{"row":750,"column":34},"action":"remove","lines":["$whatsappConfig"],"id":1798},{"start":{"row":750,"column":19},"end":{"row":750,"column":36},"action":"insert","lines":["$whatsappTemplate"]}],[{"start":{"row":753,"column":8},"end":{"row":754,"column":6},"action":"remove","lines":["","      "],"id":1799}]]},"ace":{"folds":[{"start":{"row":44,"column":15},"end":{"row":150,"column":7},"placeholder":"..."},{"start":{"row":180,"column":95},"end":{"row":199,"column":4},"placeholder":"..."},{"start":{"row":220,"column":49},"end":{"row":264,"column":4},"placeholder":"..."},{"start":{"row":269,"column":52},"end":{"row":305,"column":4},"placeholder":"..."}],"scrolltop":265,"scrollleft":0,"selection":{"start":{"row":33,"column":4},"end":{"row":36,"column":37},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1661704128084}